properties:
  template:
    containers:
    - name: primegate-auth-portal
      image: rust:1.75-slim
      command:
      - /bin/bash
      args:
      - -c
      - |
        # Install build dependencies
        apt-get update && apt-get install -y pkg-config libssl-dev curl
        
        # Build and run the Rust app
        cd /app
        cargo build --release --offline || cargo build --release
        
        echo "ðŸš€ Starting PrimeGate Portal - Pure Rust Edition"
        echo "ðŸ¦€ Launching Rust authentication portal on port 8080"
        
        exec ./target/release/primegate-auth-portal
      env:
      - name: CLIENT_ID
        value: "YOUR_CLIENT_ID"
      - name: CLIENT_SECRET
        value: "YOUR_CLIENT_SECRET"
      - name: TENANT_ID
        value: "YOUR_TENANT_ID"
      - name: RUST_LOG
        value: "info"
      - name: PORT
        value: "8080"
      workingDir: /app
      volumeMounts:
      - volumeName: source-code
        mountPath: /app
      resources:
        cpu: 1.0
        memory: 2Gi
    volumes:
    - name: source-code
      storageType: EmptyDir